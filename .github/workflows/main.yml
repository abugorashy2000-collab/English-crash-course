
    name: Build Kivy APK

    on: [push]

    jobs:
      build:
        runs-on: ubuntu-latest

        steps:

        - name: Set up Python
          uses: actions/setup-python@v5
          with:
            python-version: '3.9' # Or your desired Python version
        - name: Install Cython
          run: pip install cython
        - name: Install dependencies
          run: |
            sudo apt-get update
            sudo apt-get install -y libtinfo6
            sudo ln -s /usr/lib/x86_64-linux-gnu/libtinfo.so.6 /usr/lib/x86_64-linux-gnu/libtinfo.so.5
    
         

        - name: Install Buildozer and dependencies
          run: |
            sudo apt-get update
            sudo apt-get install -y git zip unzip openjdk-17-jdk autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libssl-dev build-essential patch libffi-dev python3-dev python3-pip
                            pip install buildozer
        - name: Create build-tools directory
          run: mkdir -p /home/runner/android-sdk/build-tools
        - name: Install Android Build Tools
          run: |
            sudo apt-get update
            sudo apt-get install -y wget unzip
            wget https://dl.google.com/android/repository/build-tools_r33.0.2-linux.zip
            unzip build-tools_r33.0.2-linux.zip -d $HOME/android-sdk/build-tools
            export PATH=$HOME/android-sdk/build-tools/33.0.0:$PATH
        - name: Generate buildozer.spec if missing
          run: |
           if [ ! -f buildozer.spec ]; then
           buildozer init
           fi
        - name: Set up working directory
          run: cd ${{ github.workspace }}
        - name: Build with Buildozer
          run: buildozer android debug
         
          

        
       

